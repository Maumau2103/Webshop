<!DOCTYPE html>
<html>
    
<head>
	
    <title> Anmelden </title>
    <link rel="stylesheet" href="style.css">
	<script src="scripts.js"></script> 
	
    <style> 
        body {
		background-color:#4EB5ED; font-family: Arial, Helvetica, sans-serif; color:white;
		background-position: initial;
		}
	label{
		width:100px;
		display:inline-block;
		margin:4px;
		}
   	input[type=submit]{
		width: 100%;
		padding: 15px;
		margin: 10px;
		border-radius: 5px;
		border:none;
		background: #39FF14;
		cursor:pointer;
		}
	
    	.div1 {
		font-family: Arial, Helvetica, sans-serif; color:white;
		background-color: darkblue;
		width: 500px;
 		border-style: solid;
		border-color: black;
 		padding: 50px;
		margin: auto ;
		margin-top:180px;
		border-radius: 7px;
		position: relative; 
		align-items: center;  

		}
	    
	a{ 	
		color: white;
		text-decoration: none;
		margin-left: 20px
		
		}
	</style>

</head>

<body onload="get()">
		
	<nav>
        <a href="index.html"> <img src="images/SELFtaught (1).jpg" alt="logo"> </a>
        <ul>
            <li><a class="active" href="index.html"> Home </a></li>
            <li><a href="impressum.html"> Über Uns </a></li>
            <li><a href="anmeldung.html" id="Anmelden"> Anmelden </a></li>
            <li><a href="registrierung.html"> Registrieren </a></li>
            <li> <img src="images/Warenkorb.png" alt="Warenkorb"> </li>
        </ul>
    </nav>
	
    	<br>
    	<br>
    	<div class="div1">
    	    <form>          
		    <label for="uname" style="color:white;text-align: left; margin-left: initial;">  E-Mail:</label>
		        <input type="text" id="email" name="uName" size="40" maxlength="30">
		        <br>
		    <label for="password" style="color:white;text-align: left; margin-left: initial;">  Passwort: </label>
		        <input type="text" id="password" name="password" size="40" maxlength="30">
    	    </form>
	        <br>
	    <input type="submit" value="Anmelden" name="Anmelden" id="logIn">
	    <p style=" text-align: left; color:white; margin-left: initial; ">
	        Noch keinen Account?
	        <a href="registrierung.html" style="font-family: Arial, Helvetica, sans-serif; color:orange"> Regestrieren </a>
	    </p>
     </div> 
</body>


<script type="module" >

    // Import the functions you need from the SDKs you need
    import {initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
    import {getDatabase} from "https://www.gstatic.com/firebasejs/9.16.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyAGdYmqeKOhGxPZYm8pelvKbG8Ms7uzPdE",
        authDomain: "webshop2023-ovgu.firebaseapp.com",
        databaseURL: "https://webshop2023-ovgu-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "webshop2023-ovgu",
        storageBucket: "webshop2023-ovgu.appspot.com",
        messagingSenderId: "255014201712",
        appId: "1:255014201712:web:a2ed39e090ce3db10107b5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const auth = getAuth();

    document.getElementById("logIn").addEventListener("click",function(){
		var email = document.getElementById("email").value;
		var password = document.getElementById("password").value;

		signInWithEmailAndPassword(auth, email, password)
		.then((userCredential)=>{
			const user = userCredential.user;
			sessionStorage.setItem("email", email);
			location.href = 'index.html';

		})
		.catch((error)=> {
			const errorCode = error.code;
			const errorMessage = error.message;
			alert("Benutzernahme und Passwort stimmen nicht überein!");
		})
	})
 


</script>

</html>
